{"ast":null,"code":"const fs = require('fs');\n\nconst bodyParser = require('body-parser');\n\nconst express = require('express');\n\nconst plaid = require('plaid');\n\nconst content = fs.readFileSync('../not_keys.json');\nconst credentials = JSON.parse(content);\nmodule.exports = credentials.public_key;\nconst APP_PORT = 8000;\nconst PLAID_CLIENT_ID = credentials.client_id;\nconst PLAID_SECRET = credentials.sandbox_secret;\nconst PLAID_PUBLIC_KEY = credentials.public_key;\nconst PLAID_ENV = 'sandbox'; // const PLAID_PRODUCTS = 'auth,transactions,balance,identity';\n// const PLAID_COUNTRY_CODES = 'US';\n\nvar PUBLIC_TOKEN = '';\nvar ACCESS_TOKEN = ''; // Initialize client\n\nconst plaidClient = new plaid.Client(PLAID_CLIENT_ID, PLAID_SECRET, PLAID_PUBLIC_KEY, plaid.environments[PLAID_ENV]);\nconst app = express();\napp.use(express.static(__dirname + '/../public'));\napp.listen(APP_PORT);\napp.use(bodyParser.urlencoded({\n  extended: false\n}));\napp.use(bodyParser.json()); // Accept the public_token sent from Link\n\napp.post('/get_access_token', function (request, response) {\n  PUBLIC_TOKEN = request.body.public_token;\n  plaidClient.exchangePublicToken(PUBLIC_TOKEN, function (error, tokenResponse) {\n    if (error != null) {\n      console.log('Could not exchange public_token!\\n' + error);\n      return response.json({\n        error: error\n      });\n    }\n\n    ACCESS_TOKEN = tokenResponse.access_token;\n    var ITEM_ID = tokenResponse.item_id;\n    console.log('Access Token: ' + ACCESS_TOKEN);\n    console.log('Item ID: ' + ITEM_ID);\n    response.json({\n      'error': null\n    });\n  });\n});","map":{"version":3,"sources":["/Users/mitchellohair/fin_dash/src/server.js"],"names":["fs","require","bodyParser","express","plaid","content","readFileSync","credentials","JSON","parse","module","exports","public_key","APP_PORT","PLAID_CLIENT_ID","client_id","PLAID_SECRET","sandbox_secret","PLAID_PUBLIC_KEY","PLAID_ENV","PUBLIC_TOKEN","ACCESS_TOKEN","plaidClient","Client","environments","app","use","static","__dirname","listen","urlencoded","extended","json","post","request","response","body","public_token","exchangePublicToken","error","tokenResponse","console","log","access_token","ITEM_ID","item_id"],"mappings":"AAAA,MAAMA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAlB;;AACA,MAAMC,UAAU,GAAGD,OAAO,CAAC,aAAD,CAA1B;;AACA,MAAME,OAAO,GAAGF,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMG,KAAK,GAAGH,OAAO,CAAC,OAAD,CAArB;;AAEA,MAAMI,OAAO,GAAGL,EAAE,CAACM,YAAH,CAAgB,kBAAhB,CAAhB;AACA,MAAMC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWJ,OAAX,CAApB;AAEAK,MAAM,CAACC,OAAP,GAAiBJ,WAAW,CAACK,UAA7B;AAEA,MAAMC,QAAQ,GAAG,IAAjB;AACA,MAAMC,eAAe,GAAGP,WAAW,CAACQ,SAApC;AACA,MAAMC,YAAY,GAAGT,WAAW,CAACU,cAAjC;AACA,MAAMC,gBAAgB,GAAGX,WAAW,CAACK,UAArC;AACA,MAAMO,SAAS,GAAG,SAAlB,C,CAEA;AACA;;AAEA,IAAIC,YAAY,GAAG,EAAnB;AACA,IAAIC,YAAY,GAAG,EAAnB,C,CAEA;;AACA,MAAMC,WAAW,GAAG,IAAIlB,KAAK,CAACmB,MAAV,CAAiBT,eAAjB,EAClBE,YADkB,EAElBE,gBAFkB,EAGlBd,KAAK,CAACoB,YAAN,CAAmBL,SAAnB,CAHkB,CAApB;AAKA,MAAMM,GAAG,GAAGtB,OAAO,EAAnB;AACAsB,GAAG,CAACC,GAAJ,CAAQvB,OAAO,CAACwB,MAAR,CAAeC,SAAS,GAAG,YAA3B,CAAR;AACAH,GAAG,CAACI,MAAJ,CAAWhB,QAAX;AACAY,GAAG,CAACC,GAAJ,CAAQxB,UAAU,CAAC4B,UAAX,CAAsB;AAC5BC,EAAAA,QAAQ,EAAE;AADkB,CAAtB,CAAR;AAGAN,GAAG,CAACC,GAAJ,CAAQxB,UAAU,CAAC8B,IAAX,EAAR,E,CAEA;;AACAP,GAAG,CAACQ,IAAJ,CAAS,mBAAT,EAA8B,UAAUC,OAAV,EAAmBC,QAAnB,EAA6B;AACzDf,EAAAA,YAAY,GAAGc,OAAO,CAACE,IAAR,CAAaC,YAA5B;AACAf,EAAAA,WAAW,CAACgB,mBAAZ,CAAgClB,YAAhC,EAA8C,UAAUmB,KAAV,EAC5CC,aAD4C,EAC7B;AACf,QAAID,KAAK,IAAI,IAAb,EAAmB;AACjBE,MAAAA,OAAO,CAACC,GAAR,CAAY,uCAAuCH,KAAnD;AACA,aAAOJ,QAAQ,CAACH,IAAT,CAAc;AAAEO,QAAAA,KAAK,EAAEA;AAAT,OAAd,CAAP;AACD;;AACDlB,IAAAA,YAAY,GAAGmB,aAAa,CAACG,YAA7B;AACA,QAAIC,OAAO,GAAGJ,aAAa,CAACK,OAA5B;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAmBrB,YAA/B;AACAoB,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAcE,OAA1B;AACAT,IAAAA,QAAQ,CAACH,IAAT,CAAc;AAAE,eAAS;AAAX,KAAd;AACD,GAXD;AAYD,CAdD","sourcesContent":["const fs = require('fs');\nconst bodyParser = require('body-parser');\nconst express = require('express');\nconst plaid = require('plaid');\n\nconst content = fs.readFileSync('../not_keys.json');\nconst credentials = JSON.parse(content);\n\nmodule.exports = credentials.public_key;\n\nconst APP_PORT = 8000;\nconst PLAID_CLIENT_ID = credentials.client_id;\nconst PLAID_SECRET = credentials.sandbox_secret;\nconst PLAID_PUBLIC_KEY = credentials.public_key;\nconst PLAID_ENV = 'sandbox';\n\n// const PLAID_PRODUCTS = 'auth,transactions,balance,identity';\n// const PLAID_COUNTRY_CODES = 'US';\n\nvar PUBLIC_TOKEN = '';\nvar ACCESS_TOKEN = '';\n\n// Initialize client\nconst plaidClient = new plaid.Client(PLAID_CLIENT_ID,\n  PLAID_SECRET,\n  PLAID_PUBLIC_KEY,\n  plaid.environments[PLAID_ENV]);\n\nconst app = express();\napp.use(express.static(__dirname + '/../public'));\napp.listen(APP_PORT);\napp.use(bodyParser.urlencoded({\n  extended: false\n}));\napp.use(bodyParser.json());\n\n// Accept the public_token sent from Link\napp.post('/get_access_token', function (request, response) {\n  PUBLIC_TOKEN = request.body.public_token;\n  plaidClient.exchangePublicToken(PUBLIC_TOKEN, function (error,\n    tokenResponse) {\n    if (error != null) {\n      console.log('Could not exchange public_token!\\n' + error);\n      return response.json({ error: error });\n    }\n    ACCESS_TOKEN = tokenResponse.access_token;\n    var ITEM_ID = tokenResponse.item_id;\n    console.log('Access Token: ' + ACCESS_TOKEN);\n    console.log('Item ID: ' + ITEM_ID);\n    response.json({ 'error': null });\n  });\n});\n"]},"metadata":{},"sourceType":"module"}